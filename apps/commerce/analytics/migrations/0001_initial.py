# Generated by Django 5.2.9 on 2026-01-09 02:29

import django.core.validators
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='CustomerSegment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('segment', models.CharField(choices=[('champions', 'Champions'), ('loyal', 'Loyal Customers'), ('potential_loyalist', 'Potential Loyalists'), ('recent', 'Recent Customers'), ('promising', 'Promising'), ('need_attention', 'Need Attention'), ('about_to_sleep', 'About to Sleep'), ('at_risk', 'At Risk'), ('cant_lose', "Can't Lose Them"), ('hibernating', 'Hibernating'), ('lost', 'Lost')], db_index=True, default='recent', max_length=30, verbose_name='Segment')),
                ('recency_score', models.PositiveSmallIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='Recency Score')),
                ('frequency_score', models.PositiveSmallIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='Frequency Score')),
                ('monetary_score', models.PositiveSmallIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='Monetary Score')),
                ('days_since_last_order', models.PositiveIntegerField(default=0, verbose_name='Days Since Last Order')),
                ('total_orders', models.PositiveIntegerField(default=0, verbose_name='Total Orders')),
                ('total_spent', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Spent')),
                ('average_order_value', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='Avg Order Value')),
                ('first_order_date', models.DateField(blank=True, null=True, verbose_name='First Order')),
                ('last_order_date', models.DateField(blank=True, null=True, verbose_name='Last Order')),
                ('customer_lifetime_days', models.PositiveIntegerField(default=0, verbose_name='Customer Lifetime (days)')),
                ('churn_risk', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Churn Risk %')),
                ('predicted_next_order_days', models.PositiveIntegerField(blank=True, null=True, verbose_name='Predicted Next Order (days)')),
            ],
            options={
                'verbose_name': 'Customer Segment',
                'verbose_name_plural': 'Customer Segments',
                'ordering': ['-total_spent'],
            },
        ),
        migrations.CreateModel(
            name='DailyMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('date', models.DateField(db_index=True, unique=True, verbose_name='Date')),
                ('total_revenue', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Revenue')),
                ('gross_revenue', models.DecimalField(decimal_places=0, default=0, help_text='Revenue before discounts', max_digits=15, verbose_name='Gross Revenue')),
                ('total_discount', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Discounts')),
                ('shipping_revenue', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='Shipping Revenue')),
                ('total_orders', models.PositiveIntegerField(default=0, verbose_name='Total Orders')),
                ('pending_orders', models.PositiveIntegerField(default=0, verbose_name='Pending Orders')),
                ('confirmed_orders', models.PositiveIntegerField(default=0, verbose_name='Confirmed Orders')),
                ('completed_orders', models.PositiveIntegerField(default=0, verbose_name='Completed Orders')),
                ('cancelled_orders', models.PositiveIntegerField(default=0, verbose_name='Cancelled Orders')),
                ('refunded_orders', models.PositiveIntegerField(default=0, verbose_name='Refunded Orders')),
                ('new_customers', models.PositiveIntegerField(default=0, verbose_name='New Customers')),
                ('returning_customers', models.PositiveIntegerField(default=0, verbose_name='Returning Customers')),
                ('unique_customers', models.PositiveIntegerField(default=0, verbose_name='Unique Customers')),
                ('total_items_sold', models.PositiveIntegerField(default=0, verbose_name='Items Sold')),
                ('unique_products_sold', models.PositiveIntegerField(default=0, verbose_name='Unique Products')),
                ('carts_created', models.PositiveIntegerField(default=0, verbose_name='Carts Created')),
                ('carts_converted', models.PositiveIntegerField(default=0, verbose_name='Carts Converted')),
                ('carts_abandoned', models.PositiveIntegerField(default=0, verbose_name='Carts Abandoned')),
                ('return_requests', models.PositiveIntegerField(default=0, verbose_name='Return Requests')),
                ('total_refund_amount', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Refunds')),
                ('average_order_value', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='Avg Order Value')),
                ('conversion_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Conversion Rate %')),
                ('cancellation_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Cancellation Rate %')),
                ('return_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Return Rate %')),
            ],
            options={
                'verbose_name': 'Daily Metric',
                'verbose_name_plural': 'Daily Metrics',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='MonthlyReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('year', models.PositiveIntegerField(verbose_name='Year')),
                ('month', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)], verbose_name='Month')),
                ('total_revenue', models.DecimalField(decimal_places=0, default=0, max_digits=18, verbose_name='Total Revenue')),
                ('total_orders', models.PositiveIntegerField(default=0, verbose_name='Total Orders')),
                ('completed_orders', models.PositiveIntegerField(default=0, verbose_name='Completed Orders')),
                ('cancelled_orders', models.PositiveIntegerField(default=0, verbose_name='Cancelled Orders')),
                ('refunded_orders', models.PositiveIntegerField(default=0, verbose_name='Refunded Orders')),
                ('total_customers', models.PositiveIntegerField(default=0, verbose_name='Total Customers')),
                ('new_customers', models.PositiveIntegerField(default=0, verbose_name='New Customers')),
                ('returning_customers', models.PositiveIntegerField(default=0, verbose_name='Returning Customers')),
                ('total_items_sold', models.PositiveIntegerField(default=0, verbose_name='Items Sold')),
                ('total_refunds', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Refunds')),
                ('average_order_value', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='Avg Order Value')),
                ('average_daily_revenue', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Avg Daily Revenue')),
                ('average_daily_orders', models.DecimalField(decimal_places=2, default=0, max_digits=8, verbose_name='Avg Daily Orders')),
                ('revenue_growth', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Revenue Growth %')),
                ('order_growth', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Order Growth %')),
                ('customer_growth', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Customer Growth %')),
                ('completion_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Completion Rate %')),
                ('cancellation_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Cancellation Rate %')),
                ('return_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Return Rate %')),
                ('top_products', models.JSONField(blank=True, default=list, verbose_name='Top Products')),
                ('top_categories', models.JSONField(blank=True, default=list, verbose_name='Top Categories')),
                ('revenue_by_source', models.JSONField(blank=True, default=dict, verbose_name='Revenue by Source')),
                ('revenue_by_payment', models.JSONField(blank=True, default=dict, verbose_name='Revenue by Payment')),
            ],
            options={
                'verbose_name': 'Monthly Report',
                'verbose_name_plural': 'Monthly Reports',
                'ordering': ['-year', '-month'],
            },
        ),
        migrations.CreateModel(
            name='ProductAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('product_id', models.PositiveIntegerField(db_index=True, unique=True, verbose_name='Product ID')),
                ('product_name', models.CharField(blank=True, help_text='Denormalized for display purposes', max_length=255, verbose_name='Product Name')),
                ('total_views', models.PositiveIntegerField(default=0, verbose_name='Total Views')),
                ('total_cart_adds', models.PositiveIntegerField(default=0, verbose_name='Add to Cart')),
                ('total_purchases', models.PositiveIntegerField(default=0, verbose_name='Purchases')),
                ('total_quantity_sold', models.PositiveIntegerField(default=0, verbose_name='Qty Sold')),
                ('total_revenue', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Total Revenue')),
                ('total_returns', models.PositiveIntegerField(default=0, verbose_name='Returns')),
                ('total_return_value', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Return Value')),
                ('views_30d', models.PositiveIntegerField(default=0, verbose_name='Views (30d)')),
                ('cart_adds_30d', models.PositiveIntegerField(default=0, verbose_name='Cart Adds (30d)')),
                ('purchases_30d', models.PositiveIntegerField(default=0, verbose_name='Purchases (30d)')),
                ('revenue_30d', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Revenue (30d)')),
                ('view_to_cart_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='View-to-Cart %')),
                ('cart_to_purchase_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Cart-to-Purchase %')),
                ('return_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Return Rate %')),
                ('performance_score', models.DecimalField(decimal_places=2, default=0, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Performance Score')),
                ('trending_up', models.BooleanField(default=False, verbose_name='Trending Up')),
                ('slow_mover', models.BooleanField(default=False, verbose_name='Slow Mover')),
                ('last_calculated_at', models.DateTimeField(auto_now=True, verbose_name='Last Calculated')),
            ],
            options={
                'verbose_name': 'Product Analytics',
                'verbose_name_plural': 'Product Analytics',
                'ordering': ['-total_revenue'],
            },
        ),
        migrations.CreateModel(
            name='RevenueBreakdown',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('breakdown_type', models.CharField(choices=[('category', 'By Category'), ('brand', 'By Brand'), ('payment', 'By Payment Method'), ('source', 'By Order Source'), ('region', 'By Region (City)'), ('segment', 'By Customer Segment')], db_index=True, max_length=20, verbose_name='Breakdown Type')),
                ('dimension_key', models.CharField(db_index=True, max_length=100, verbose_name='Dimension Key')),
                ('dimension_label', models.CharField(max_length=200, verbose_name='Dimension Label')),
                ('revenue', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Revenue')),
                ('order_count', models.PositiveIntegerField(default=0, verbose_name='Order Count')),
                ('item_count', models.PositiveIntegerField(default=0, verbose_name='Item Count')),
                ('unique_customers', models.PositiveIntegerField(default=0, verbose_name='Unique Customers')),
                ('revenue_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Revenue %')),
            ],
            options={
                'verbose_name': 'Revenue Breakdown',
                'verbose_name_plural': 'Revenue Breakdowns',
                'ordering': ['-date', 'breakdown_type', '-revenue'],
            },
        ),
        migrations.CreateModel(
            name='SalesFunnel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('date', models.DateField(db_index=True, unique=True, verbose_name='Date')),
                ('visitors', models.PositiveIntegerField(default=0, verbose_name='Visitors')),
                ('product_views', models.PositiveIntegerField(default=0, verbose_name='Product Views')),
                ('add_to_carts', models.PositiveIntegerField(default=0, verbose_name='Add to Cart')),
                ('cart_views', models.PositiveIntegerField(default=0, verbose_name='Cart Views')),
                ('checkout_started', models.PositiveIntegerField(default=0, verbose_name='Checkout Started')),
                ('payment_initiated', models.PositiveIntegerField(default=0, verbose_name='Payment Initiated')),
                ('payment_completed', models.PositiveIntegerField(default=0, verbose_name='Payment Completed')),
                ('orders_completed', models.PositiveIntegerField(default=0, verbose_name='Orders Completed')),
                ('view_to_cart_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='View→Cart %')),
                ('cart_to_checkout_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Cart→Checkout %')),
                ('checkout_to_payment_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Checkout→Payment %')),
                ('payment_success_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Payment Success %')),
                ('overall_conversion_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Overall Conversion %')),
                ('cart_abandonment_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Cart Abandonment %')),
                ('checkout_abandonment_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Checkout Abandonment %')),
                ('payment_failure_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Payment Failure %')),
            ],
            options={
                'verbose_name': 'Sales Funnel',
                'verbose_name_plural': 'Sales Funnels',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='TrafficSource',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('source', models.CharField(db_index=True, max_length=50, verbose_name='Source')),
                ('sessions', models.PositiveIntegerField(default=0, verbose_name='Sessions')),
                ('unique_visitors', models.PositiveIntegerField(default=0, verbose_name='Unique Visitors')),
                ('page_views', models.PositiveIntegerField(default=0, verbose_name='Page Views')),
                ('orders', models.PositiveIntegerField(default=0, verbose_name='Orders')),
                ('revenue', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Revenue')),
                ('conversion_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Conversion Rate %')),
                ('avg_session_duration', models.PositiveIntegerField(default=0, verbose_name='Avg Session (sec)')),
                ('bounce_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Bounce Rate %')),
            ],
            options={
                'verbose_name': 'Traffic Source',
                'verbose_name_plural': 'Traffic Sources',
                'ordering': ['-date', '-revenue'],
            },
        ),
        migrations.CreateModel(
            name='AbandonedCartMetric',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tạo')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ngày cập nhật')),
                ('date', models.DateField(db_index=True, unique=True, verbose_name='Date')),
                ('total_abandoned', models.PositiveIntegerField(default=0, verbose_name='Total Abandoned')),
                ('total_recovered', models.PositiveIntegerField(default=0, verbose_name='Recovered')),
                ('total_value_abandoned', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Value Abandoned')),
                ('total_value_recovered', models.DecimalField(decimal_places=0, default=0, max_digits=15, verbose_name='Value Recovered')),
                ('recovery_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Recovery Rate %')),
                ('value_recovery_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Value Recovery %')),
                ('abandonment_by_hour', models.JSONField(blank=True, default=dict, verbose_name='By Hour')),
                ('top_abandoned_products', models.JSONField(blank=True, default=list, verbose_name='Top Abandoned Products')),
                ('avg_cart_value', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='Avg Cart Value')),
                ('avg_items_per_cart', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Avg Items/Cart')),
                ('avg_time_to_abandon', models.PositiveIntegerField(default=0, verbose_name='Avg Time to Abandon (min)')),
            ],
            options={
                'verbose_name': 'Abandoned Cart Metric',
                'verbose_name_plural': 'Abandoned Cart Metrics',
                'ordering': ['-date'],
                'indexes': [models.Index(fields=['-date'], name='analytics_a_date_a097e6_idx')],
            },
        ),
    ]
